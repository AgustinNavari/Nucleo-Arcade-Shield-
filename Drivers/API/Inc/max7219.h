#include <stdint.h>
#include <stdbool.h>
#include "max7219_port_stm32.h"
#include <string.h>

#define MAX7219_SHUTDOWN 0x0C
#define	MAX7219_TEST 0x0F
#define MAX7219_MODE 0x09
#define MAX7219_SCAN 0x0B
#define MAX7219_BRIGHTNESS 0x0A

#define MAX7219_ROWS 8
#define MAX7219_COLS 8

#define DISPLAY_ROWS 16
#define DISPLAY_COLS 16

typedef struct { char ch; uint8_t col[5]; } Chars5x7;

static const Chars5x7 font5x7[] = {
    { ' ', { 0x00,0x00,0x00,0x00,0x00 } },
    { '.', { 0x00,0x00,0x00,0x60,0x60 } },
    { '-', { 0x00,0x10,0x10,0x10,0x00 } },
    { ':', { 0x00,0x24,0x00,0x24,0x00 } },
    { '0', { 0x3E,0x51,0x49,0x45,0x3E } },
    { '1', { 0x00,0x42,0x7F,0x40,0x00 } },
    { '2', { 0x42,0x61,0x51,0x49,0x46 } },
    { '3', { 0x21,0x41,0x45,0x4B,0x31 } },
    { '4', { 0x18,0x14,0x12,0x7F,0x10 } },
    { '5', { 0x27,0x45,0x45,0x45,0x39 } },
    { '6', { 0x3C,0x4A,0x49,0x49,0x30 } },
    { '7', { 0x01,0x71,0x09,0x05,0x03 } },
    { '8', { 0x36,0x49,0x49,0x49,0x36 } },
    { '9', { 0x06,0x49,0x49,0x29,0x1E } },
    { 'A', { 0x7E,0x11,0x11,0x11,0x7E } },
    { 'B', { 0x7F,0x49,0x49,0x49,0x36 } },
    { 'C', { 0x3E,0x41,0x41,0x41,0x22 } },
    { 'D', { 0x7F,0x41,0x41,0x22,0x1C } },
    { 'E', { 0x7F,0x49,0x49,0x49,0x41 } },
    { 'F', { 0x7F,0x09,0x09,0x09,0x01 } },
    { 'G', { 0x3E,0x41,0x49,0x49,0x7A } },
    { 'H', { 0x7F,0x08,0x08,0x08,0x7F } },
    { 'I', { 0x00,0x41,0x7F,0x41,0x00 } },
    { 'J', { 0x20,0x40,0x41,0x3F,0x01 } },
    { 'K', { 0x7F,0x08,0x14,0x22,0x41 } },
    { 'L', { 0x7F,0x40,0x40,0x40,0x40 } },
    { 'M', { 0x7F,0x02,0x0C,0x02,0x7F } },
    { 'N', { 0x7F,0x04,0x08,0x10,0x7F } },
    { 'O', { 0x3E,0x41,0x41,0x41,0x3E } },
    { 'P', { 0x7F,0x09,0x09,0x09,0x06 } },
    { 'Q', { 0x3E,0x41,0x51,0x21,0x5E } },
    { 'R', { 0x7F,0x09,0x19,0x29,0x46 } },
    { 'S', { 0x46,0x49,0x49,0x49,0x31 } },
    { 'T', { 0x01,0x01,0x7F,0x01,0x01 } },
    { 'U', { 0x3F,0x40,0x40,0x40,0x3F } },
    { 'V', { 0x1F,0x20,0x40,0x20,0x1F } },
    { 'W', { 0x3F,0x40,0x38,0x40,0x3F } },
    { 'X', { 0x63,0x14,0x08,0x14,0x63 } },
    { 'Y', { 0x07,0x08,0x70,0x08,0x07 } },
    { 'Z', { 0x61,0x51,0x49,0x45,0x43 } },
};

void setPixel16(uint8_t x, uint8_t y, bool on);
void MAX7219_InitAll(void);
void updateDisplay16(void);
void shiftLeft16(void);
void drawChar16(uint8_t x, uint8_t y, char character);
void fill16(bool on);

